<div class="container" fxLayoutAlign="center center">
  <mat-card fxLayoutAlign="space-around center" class="register-template">
    <mat-card-header fxLayoutAlign="center">
      <mat-card-title class="title">Register</mat-card-title>
    </mat-card-header>

    <form fxLayout="column">

      <mat-card-content>
        <form novalidate [formGroup]="registerForm" #fform="ngForm" (ngSubmit)="onSubmit()">
          <div class="input" fxLayout="column" fxLayoutAlign="space-between">
            <mat-form-field >
              <input matInput placeholder="Username" type="text" formControlName="username">
              <mat-error *ngIf="!registerForm.get('username')?.valid && 
                (registerForm.controls['username'].touched || registerForm.controls['username'].dirty)">
                {{getUsernameErrorMessage()}}</mat-error>
            </mat-form-field>
            <mat-form-field >
              <input matInput placeholder="Email address" type="text" formControlName="email">
              <mat-error *ngIf="!registerForm.get('email')?.valid">
                {{getEmailErrorMessage()}}</mat-error>
            </mat-form-field>
            <mat-form-field >
              <input matInput placeholder="Password" [type]="hide ? 'password' : 'text'" formControlName="password">
              <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              <mat-error *ngIf="!registerForm.get('password')?.valid">
                {{getPasswordErrorMessage()}}</mat-error>
            </mat-form-field>
            <mat-form-field >
              <input matInput placeholder="Confirm password" [type]="hide ? 'password' : 'text'"
                formControlName="repeatPassword" #repeat_password>
              <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              <mat-error *ngIf="!registerForm.get('repeatPassword')?.valid">
                Passwords are not identical</mat-error>
            </mat-form-field>
            <div fxLayoutAlign="center">
              <button type="submit" mat-stroked-button color="accent"
                [disabled]="registerForm.invalid">Register</button>
            </div>
            <mat-error *ngIf="errorMessage" class="error-message">{{errorMessage}}</mat-error>
          </div>
        </form>
      </mat-card-content>
    </form>
  </mat-card>
</div>
<div fxLayout="row" fxLayoutAlign="center center">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Register</mat-card-title>
    </mat-card-header>

    <form fxLayout="column">

      <mat-card-content>
        <form novalidate [formGroup]="registerForm" #fform="ngForm" (ngSubmit)="onSubmit()">
          <mat-form-field fxLayout="row">
            <input matInput placeholder="Username" type="text" formControlName="username">
            <mat-error *ngIf="!registerForm.get('username')?.valid && 
                (registerForm.controls['username'].touched || registerForm.controls['username'].dirty)">
              {{getUsernameErrorMessage()}}</mat-error>
          </mat-form-field>
          <mat-form-field fxLayout="row">
            <input matInput placeholder="Email address" type="text" formControlName="email">
            <mat-error *ngIf="!registerForm.get('email')?.valid">
              {{getEmailErrorMessage()}}</mat-error>
          </mat-form-field>
          <mat-form-field fxLayout="row">
            <input matInput placeholder="Password" [type]="hide ? 'password' : 'text'" formControlName="password">
            <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            <mat-error *ngIf="!registerForm.get('password')?.valid">
              {{getPasswordErrorMessage()}}</mat-error>
          </mat-form-field>
          <mat-form-field fxLayout="row">
            <input matInput placeholder="Confirm password" [type]="hide ? 'password' : 'text'"
              formControlName="repeatPassword" #repeat_password>
            <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            <mat-error *ngIf="!registerForm.get('repeatPassword')?.valid">
              Passwords are not identical</mat-error>
          </mat-form-field>
          <div fxLayout="row" fxLayoutGap="50px" fxLayoutAlign="space-around">
            <button type="submit" mat-stroked-button color="accent" [disabled]="registerForm.invalid">Register</button>
            <a mat-button routerLink="/forgot-password">Forgot password?</a>
          </div>
          <mat-error *ngIf="errorMessage">{{errorMessage}}</mat-error>
        </form>
      </mat-card-content>
    </form>
  </mat-card>
</div>